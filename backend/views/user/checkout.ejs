<!DOCTYPE html>
<html lang="en">


<meta http-equiv="content-type" content="text/html;charset=UTF-8" />

<head>
     <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="author" content="flexkit">

  <link rel="shortcut icon" href="images/stayrare/fav.png" type="image/x-icon">
  <link rel="preconnect" href="https://fonts.gstatic.com/">

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Jost:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Allura&amp;display=swap" rel="stylesheet">

  <!-- Stylesheets -->
  <link rel="stylesheet" href="/css/plugins/swiper.min.css" type="text/css">
  <link rel="stylesheet" href="/css/plugins/jquery.fancybox.css" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
<link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!--[if lt IE 9]>
    <script src="http://css3-mediaqueries-js.googlecode.com/svn/trunk/css3-mediaqueries.js"></script>
  <![endif]-->

  <!-- Document Title -->
  <title>Checkout | STAY RARE</title>
    <style>
                .icon-container {
            display: flex;
            gap: 40px;
            align-items: center;
        }

        .icon {
            position: relative;
            width: 20px;
            height:20px;
            cursor: pointer;
            transition: transform 0.2s ease;
        }

        .icon:hover {
            transform: scale(1.1);
        }

        .icon-svg {
            width: 100%;
            height: 100%;
            display: block;
        }

        .badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #3B1D58;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            font-weight: 600;
            border: 2px solid #f5f5f5;
        }

        .icon:nth-child(2) .badge {
            background: #ef4444;
        }

        .icon:nth-child(3) .badge {
            background: #3B1D58;
        }

        :root {
            --primary-color: #3B1D58;
            --primary-hover: #3B1D58;
            --text-color: #1f2937;
            --light-text: #6b7280;
            --border-color: #e5e7eb;
            --bg-color: #f9fafb;
            --success-color: #10b981;
            --error-color: #ef4444;
            --warning-color: #f59e0b;
            --radius: 0.5rem;
            --shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* Main Content */
        .page-content {
            padding: 2rem 0;
        }

        .title {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: var(--text-color);
        }

        .title-sub {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 1rem;
        }

        /* Layout */
        .checkout-layout {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        @media (min-width: 992px) {
            .checkout-layout {
                grid-template-columns: 2fr 1fr;
            }
        }

        /* Address Selection */
        .address-selection {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
        }

        .address-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .address-card {
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            padding: 1.25rem;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }

        .address-card:hover {
            border-color: var(--primary-color);
        }

        .address-card.selected {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 1px var(--primary-color);
        }

        .address-card h5 {
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .address-card p {
            margin-bottom: 0.25rem;
            color: var(--light-text);
            font-size: 0.875rem;
        }

        .address-badge {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: var(--primary-color);
            color: white;
            font-size: 0.75rem;
            padding: 0.25rem 0.5rem;
            border-radius: 9999px;
        }

        .use-address-btn {
            margin-top: 0.75rem;
            background: none;
            border: 1px solid var(--primary-color);
            color: var(--primary-color);
            padding: 0.375rem 0.75rem;
            border-radius: var(--radius);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .use-address-btn:hover {
            background-color: var(--primary-color);
            color: white;
        }

        /* Form Elements */
        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            font-size: 1rem;
            transition: border-color 0.2s ease;
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 1px var(--primary-color);
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
        }

        .checkbox-input {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: var(--primary-color);
            cursor: pointer;
        }

        /* Order Summary */
        .order-summary {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            position: sticky;
            top: 1rem;
        }

        .order-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 1.5rem;
        }

        .order-table th,
        .order-table td {
            padding: 0.75rem 0;
            border-bottom: 1px solid var(--border-color);
            text-align: left;
        }

        .order-table th {
            font-weight: 600;
        }

        .order-table tfoot th {
            font-weight: 700;
        }

        .order-table tfoot tr:last-child th,
        .order-table tfoot tr:last-child td {
            border-bottom: none;
            font-size: 1.125rem;
        }

        .product-name {
            font-weight: 500;
        }

        .product-name small {
            color: var(--light-text);
            font-size: 0.875rem;
        }

        /* Payment Methods */
        .payment-methods {
            margin-top: 1.5rem;
        }

        .payment-card {
            border: 1px solid var(--border-color);
            border-radius: var(--radius);
            margin-bottom: 0.75rem;
            overflow: hidden;
        }

        .payment-header {
            padding: 1rem;
            background-color: var(--bg-color);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .payment-header:hover {
            background-color: #f3f4f6;
        }

        .payment-body {
            padding: 1rem;
            display: none;
        }

        .payment-body.expanded {
            display: block;
        }

        /* Buttons */
        .btn {
            display: inline-block;
            padding: 10px 5px;
            border-radius: var(--radius);
            font-weight: 500;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            border: none;
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
            color: yellow;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .btn-link {
            background: none;
            border: none;
            color: var(--primary-color);
            text-decoration: underline;
            cursor: pointer;
            padding: 0;
        }

        /* Coupon Section */
        .coupon-toggle {
            margin-bottom: 1rem;
        }

        .coupon-content {
            background: white;
            padding: 1.5rem;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 1.5rem;
        }

        .input-wrapper-inline {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 0.5rem;
        }

        /* Alerts */
        .alert {
            padding: 0.75rem 1rem;
            border-radius: var(--radius);
            margin-bottom: 1rem;
        }

        .alert-success {
            background-color: #ecfdf5;
            color: var(--success-color);
            border: 1px solid #a7f3d0;
        }

        .alert-error {
            background-color: #fef2f2;
            color: var(--error-color);
            border: 1px solid #fecaca;
        }

        /* Utility Classes */
        .mt-1 {
            margin-top: 0.25rem;
        }

        .mt-2 {
            margin-top: 0.5rem;
        }

        .mt-3 {
            margin-top: 0.75rem;
        }

        .mt-4 {
            margin-top: 1rem;
        }

        .mt-5 {
            margin-top: 1.5rem;
        }

        .mb-1 {
            margin-bottom: 0.25rem;
        }

        .mb-2 {
            margin-bottom: 0.5rem;
        }

        .mb-3 {
            margin-bottom: 0.75rem;
        }

        .mb-4 {
            margin-bottom: 1rem;
        }

        .mb-5 {
            margin-bottom: 1.5rem;
        }

        .hidden {
            display: none;
        }
    </style>
    <style>
        /* Modal Styles */
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 10000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: #fff;
            border-radius: 8px;
            width: 100%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            animation: modalFadeIn 0.3s ease-out;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.5rem;
            color: #333;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .modal-close:hover {
            color: #333;
        }

        .modal-body {
            padding: 20px;
        }

        .modal-footer {
            padding: 15px 20px;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: flex-end;
            gap: 10px;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .form-text {
            display: block;
            margin-top: 5px;
            font-size: 0.8rem;
            color: #666;
        }
        


    </style>

</head>

<body>
    
  <div class="header-mobile header_sticky">
    <div class="container d-flex align-items-center h-100">
      <a class="mobile-nav-activator d-block position-relative"  href="#">
        <img style="height: 30px; width: 30px;" class="menu-icn nav-icon" src="/images/menu.png" alt="">
        <div class="btn-close-lg position-absolute top-0 start-0 w-100 cls-btn"></div>
      </a>

      <div class="logo">
        <a href="/">
          <img src="images/stayrare/logo.png" alt="stayrare" class="logo__image d-block">
        </a>
      </div><!-- /.logo -->

      <a href="/cart" class="header-tools__item header-tools__cart " >
           <div class="icon">
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                <line x1="3" y1="6" x2="21" y2="6"/>
                <path d="M16 10a4 4 0 0 1-8 0"/>
            </svg>
        
        </div>
      </a>
    </div><!-- /.container -->

    <nav class="header-mobile__navigation navigation d-flex flex-column w-100 position-absolute top-100 bg-body overflow-auto">
 

      <div class="container">
        <div class="overflow-hidden">
          <ul class="navigation__list list-unstyled position-relative">
            <li class="navigation__item">
              <a href="/" class="navigation__link js-nav-right d-flex align-items-center">Home</a>
       
            </li>
            <li class="navigation__item">
              <a style="display: flex; justify-content: space-between!important;" href="#" class="navigation__link js-nav-right d-flex align-items-center justify-between">Store <span><i class="ri-arrow-right-s-line"></i></span></a>
              <div class="sub-menu position-absolute top-0 start-100 w-100 d-none">
                <a href="#" class="navigation__link js-nav-left d-flex align-items-center border-bottom mb-3"><i class="ri-arrow-left-s-line"></i>Store</a>
              <div class="sub-menu__wrapper">
                  <% if (typeof categories !== 'undefined' && categories.length) { %>
                    <% categories.forEach(function(category) { %>
                      <a href="/store?category=<%= category._id %>" class="navigation__link js-nav-right d-flex align-items-center">
                        <%= category.name %>
                        <% if (category.activeSubCategories && category.activeSubCategories.length) { %>
                          <svg class="ms-auto" width="7" height="11" viewBox="0 0 7 11" xmlns="http://www.w3.org/2000/svg">
                            <use href="#icon_next_sm" />
                          </svg>
                        <% } %>
                      </a>
                      <% if (category.activeSubCategories && category.activeSubCategories.length) { %>
                        <div class="sub-menu__wrapper position-absolute top-0 start-100 w-100 d-none">
                          <a href="/store?category=<%= category._id %>" class="navigation__link js-nav-left d-flex align-items-center border-bottom mb-2">
                            <svg class="me-2" width="7" height="11" viewBox="0 0 7 11" xmlns="http://www.w3.org/2000/svg">
                              <use href="#icon_prev_sm" />
                            </svg>
                            <%= category.name %>
                          </a>
                          <ul class="sub-menu__list list-unstyled">
                            <% category.activeSubCategories.forEach(function(subcat) { %>
                              <li class="sub-menu__item">
                                <a href="/store?category=<%= category._id %>&subcategory=<%= subcat._id %>" class="menu-link menu-link_us-s">
                                  <%= subcat.name %>
                                </a>
                              </li>
                            <% }); %>
                          </ul>
                        </div>
                      <% } %>
                    <% }); %>
                  <% } else { %>
                    <span class="menu-link menu-link_us-s text-muted">No categories</span>
                  <% } %>
                </div>
              </div>
            </li>
            <li class="navigation__item">
                <a href="/about" class="navigation__link">About</a>
              </li>
              <li class="navigation__item">
                <a href="/account" class="navigation__link">Account</a>
              </li>
              <li class="navigation__item">
                <a href="/orders" class="navigation__link">Orders</a>
              </li>
              <li class="navigation__item">
                <a href="/cart" class="navigation__link">Cart</a>
              </li>
              <li class="navigation__item">
                <a href="/wishlist" class="navigation__link">Wishlist</a>
              </li>
                </li>
                     <li class="navigation__item">
              <a href="/blogs" class="navigation__link">blogs</a>
            </li>

       



   

            <li class="navigation__item">
              <a href="/contact" class="navigation__link">Contact</a>
            </li>
      
          </ul><!-- /.navigation__list -->
        </div><!-- /.overflow-hidden -->
      </div><!-- /.container -->

      <div class="border-top mobile-sidebar-social mt-auto pb-2">
        <a href="">
          <a href="<%= user ? '/account' : '/auth/login' %>">
            <div class="customer-links container  mt-4 mb-2 pb-1">
              <svg class="d-inline-block align-middle" width="20" height="20" viewBox="0 0 20 20" fill="none"
                xmlns="http://www.w3.org/2000/svg">
                <use href="#icon_user" />
              </svg>
              <span class="d-inline-block ms-2 text-uppercase align-middle fw-medium">My Account</span>
            </div>
          </a>





          <ul class="container social-links d-flex justify-content-around list-unstyled d-flex flex-wrap mb-0">
               <li>
              <a href="https://www.facebook.com/profile.php?id=61578094636322 " class="footer__social-link d-block">
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0,0,256,256">
<g fill="black" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(10.66667,10.66667)"><path d="M17.525,9h-3.525v-2c0,-1.032 0.084,-1.682 1.563,-1.682h1.868v-3.18c-0.909,-0.094 -1.823,-0.14 -2.738,-0.138c-2.713,0 -4.693,1.657 -4.693,4.699v2.301h-3v4l3,-0.001v9.001h4v-9.003l3.066,-0.001z"></path></g></g>
</svg>
              </a>
            </li>
            <li>
              <a href="https://www.twitter.com/" class="footer__social-link d-block">
                <svg class="svg-icon svg-icon_x" width="14" height="13" viewBox="0 0 1200 1227" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
  <path d="M 880 0 L 585 455 L 290 0 H 0 L 425 623 L 0 1227 H 290 L 585 772 L 880 1227 H 1170 L 745 623 L 1170 0 Z"/>
</svg>
              </a>
            </li>
            <li>
              <a href="https://www.instagram.com/" class="footer__social-link d-block">
               <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0,0,256,256">
<g fill="black" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(10.66667,10.66667)"><path d="M8,3c-2.757,0 -5,2.243 -5,5v8c0,2.757 2.243,5 5,5h8c2.757,0 5,-2.243 5,-5v-8c0,-2.757 -2.243,-5 -5,-5zM8,5h8c1.654,0 3,1.346 3,3v8c0,1.654 -1.346,3 -3,3h-8c-1.654,0 -3,-1.346 -3,-3v-8c0,-1.654 1.346,-3 3,-3zM17,6c-0.55228,0 -1,0.44772 -1,1c0,0.55228 0.44772,1 1,1c0.55228,0 1,-0.44772 1,-1c0,-0.55228 -0.44772,-1 -1,-1zM12,7c-2.757,0 -5,2.243 -5,5c0,2.757 2.243,5 5,5c2.757,0 5,-2.243 5,-5c0,-2.757 -2.243,-5 -5,-5zM12,9c1.654,0 3,1.346 3,3c0,1.654 -1.346,3 -3,3c-1.654,0 -3,-1.346 -3,-3c0,-1.654 1.346,-3 3,-3z"></path></g></g>
</svg>
              </a>
            </li>
            <li>
              <a href="https://www.youtube.com/" class="footer__social-link d-block">
                <svg class="svg-icon svg-icon_youtube" width="16" height="11" viewBox="0 0 16 11" xmlns="http://www.w3.org/2000/svg"><path d="M15.0117 1.8584C14.8477 1.20215 14.3281 0.682617 13.6992 0.518555C12.5234 0.19043 7.875 0.19043 7.875 0.19043C7.875 0.19043 3.19922 0.19043 2.02344 0.518555C1.39453 0.682617 0.875 1.20215 0.710938 1.8584C0.382812 3.00684 0.382812 5.46777 0.382812 5.46777C0.382812 5.46777 0.382812 7.90137 0.710938 9.07715C0.875 9.7334 1.39453 10.2256 2.02344 10.3896C3.19922 10.6904 7.875 10.6904 7.875 10.6904C7.875 10.6904 12.5234 10.6904 13.6992 10.3896C14.3281 10.2256 14.8477 9.7334 15.0117 9.07715C15.3398 7.90137 15.3398 5.46777 15.3398 5.46777C15.3398 5.46777 15.3398 3.00684 15.0117 1.8584ZM6.34375 7.68262V3.25293L10.2266 5.46777L6.34375 7.68262Z"/></svg>
              </a>
            </li>
          </ul>
      </div>
    </nav><!-- /.navigation -->
  </div><!-- /.header-mobile -->
        <!-- Start of Header -->
  <header id="header" class="header header-fullwidth header-transparent-bg">

    <div class="header-desk header-desk_type_2">
      <nav class="navigation d-flex">


        <ul class="navigation__list list-unstyled d-flex">
          <li class="navigation__item">
            <a href="/" class="navigation__link">Home</a>
      
          </li>
                  <li class="navigation__item">
            <a href="/store" class="navigation__link">Store</a>
      <ul class="default-menu list-unstyled">
              <% if (typeof categories !== 'undefined' && categories.length) { %>
                <% categories.forEach(function(category) { %>
                  <li class="sub-menu__item position-relative">
                    <a href="/store?category=<%= category._id %>" class="menu-link menu-link_us-s">
                      <%= category.name %>
                    </a>
                    <% if (category.activeSubCategories && category.activeSubCategories.length) { %>
                      <ul class="sub-menu list-unstyled position-absolute start-100 top-0 ms-2">
                        <% category.activeSubCategories.forEach(function(subcat) { %>
                          <li>
                            <a href="/store?category=<%= category._id %>&subcategory=<%= subcat._id %>" class="menu-link menu-link_us-s">
                              <%= subcat.name %>
                            </a>
                          </li>
                        <% }); %>
                      </ul>
                    <% } %>
                  </li>
                <% }); %>
              <% } else { %>
                <li class="sub-menu__item"><span class="menu-link menu-link_us-s text-muted">No categories</span></li>
              <% } %>
            </ul><!-- /.box-menu -->
          </li>
           <li class="navigation__item">
            <a href="/about" class="navigation__link">About</a>
          </li>
     
 
     
               <li class="navigation__item">
            <a href="/blogs" class="navigation__link">Blog</a>
    
          </li>
          <li class="navigation__item">
            <a href="/contact" class="navigation__link">Contact</a>
          </li>
        </ul><!-- /.navigation__list -->
      </nav><!-- /.navigation -->

      <div class="logo">
        <a href="/">
          <img style="top: 50%;" src="images/stayrare/logo.png" alt="Stayrare" class="logo__image d-block">
        </a>
      </div><!-- /.logo -->

      <div class="header-tools d-flex align-items-center">
     

      <div class="header-tools__item hover-container">
          <a class="" href="<%= user ? '/account' : '/auth/login' %>" data-aside="customerForms">
              <div class="icon">
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
   
        </div>
          </a>
        </div>

        <a class="header-tools__item" href="/wishlist">
             <div class="icon">
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/>
            </svg>
         
        </div>
        </a>

        <a href="/cart" class="header-tools__item header-tools__cart " >
     <div class="icon">
            <svg class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"/>
                <line x1="3" y1="6" x2="21" y2="6"/>
                <path d="M16 10a4 4 0 0 1-8 0"/>
            </svg>
 
        </div>
          
        </a>
      </div><!-- /.header__tools -->
    </div><!-- /.header-desk header-desk_type_2 -->
  </header>
        <!-- End of Header -->

        <!-- Start of Main -->
        <main class="main checkout">
            <!-- Start of Breadcrumb -->
            <nav class="breadcrumb-nav">
                <div class="container">
                    <ul class="breadcrumb shop-breadcrumb bb-no">
                        <li class="passed"><a href="/cart">Shopping Cart</a></li>
                        <li class="active"><a href="/checkout">Checkout</a></li>

                    </ul>
                </div>
            </nav>
            <!-- End of Breadcrumb -->


            <!-- Start of PageContent -->
            <main class="page-content">
                <div class="container">
                    <h1 class="title">Checkout</h1>

                    <!-- Responsive wrapper for checkout layout -->
                    <div class="checkout-layout-responsive">
                        <div class="checkout-layout">
                            <!-- Left Column - Address and Payment -->
                            <div class="checkout-left">
                                <!-- Address Section -->
                                <section class="address-selection">
                                    <h2 class="title-sub">Address Details</h2>

                                    <!-- Show this when no addresses exist -->
                                    <% if (!addresses || addresses.length===0) { %>
                                        <div class="no-addresses">
                                            <p>You don't have any saved addresses. Please add one to continue.</p>
                                            <button class="btn btn-primary" id="show-address-form">+ Add New
                                                Address</button>
                                        </div>
                                    <% } %>

                                    <!-- Show this when addresses exist -->
                                    <% if (addresses && addresses.length> 0) { %>
                                        <div class="address-options">
                                            <h3 class="title-sub mb-3">Select Billing Address</h3>
                                            <!-- Responsive horizontal scroll for address cards on small screens -->
                                            <div class="address-grid address-grid-scroll">
                                                <% addresses.forEach(address=> { %>
                                                    <div class="address-card <%= selectedBillingAddress === address._id.toString() ? 'selected' : '' %>"
                                                        data-address-id="<%= address._id %>"
                                                        data-address-type="billing">
                                                        <% if (address.isDefault) { %>
                                                            <span class="address-badge">Default</span>
                                                        <% } %>
                                                        <h5>
                                                            <%= address.name %>
                                                        </h5>
                                                        <p>
                                                            <%= address.addressLine1 %>
                                                        </p>
                                                        <% if (address.addressLine2) { %>
                                                            <p>
                                                                <%= address.addressLine2 %>
                                                            </p>
                                                        <% } %>
                                                        <p>
                                                            <%= address.city %>, <%= address.state %> - <%= address.pincode %>
                                                        </p>
                                                        <p>Phone: <%= address.phone %>
                                                        </p>
                                                        <button class="use-address-btn">
                                                            Use for Billing
                                                        </button>
                                                    </div>
                                                <% }); %>
                                            </div>

                                            <div class="form-group mt-3">
                                                <label class="checkbox-label">
                                                    <input type="checkbox" class="checkbox-input"
                                                        id="same-as-billing" checked>
                                                    Shipping address same as billing
                                                </label>
                                            </div>

                                            <div id="shipping-address-section" class="hidden">
                                                <h3 class="title-sub mb-3">Select Shipping Address</h3>
                                                <div class="address-grid address-grid-scroll">
                                                    <% addresses.forEach(address=> { %>
                                                        <div class="address-card <%= selectedShippingAddress === address._id.toString() ? 'selected' : '' %>"
                                                            data-address-id="<%= address._id %>"
                                                            data-address-type="shipping">
                                                            <% if (address.isDefault) { %>
                                                                <span class="address-badge">Default</span>
                                                            <% } %>
                                                            <h5>
                                                                <%= address.name %>
                                                            </h5>
                                                            <p>
                                                                <%= address.addressLine1 %>
                                                            </p>
                                                            <% if (address.addressLine2) { %>
                                                                <p>
                                                                    <%= address.addressLine2 %>
                                                                </p>
                                                            <% } %>
                                                            <p>
                                                                <%= address.city %>, <%= address.state %> - <%= address.pincode %>
                                                            </p>
                                                            <p>Phone: <%= address.phone %>
                                                            </p>
                                                            <button class="use-address-btn">
                                                                Use for Shipping
                                                            </button>
                                                        </div>
                                                    <% }); %>
                                                </div>
                                            </div>

                                            <div class="text-center mt-4">
                                                <button class="btn btn-primary" id="add-new-address-btn">+ Add New
                                                    Address</button>
                                            </div>
                                        </div>
                                    <% } %>
                                </section>

                                <!-- Coupon Section -->
                                <section class="coupon-toggle mb-3">
                                    Have a coupon? <button class="btn-link" id="show-coupon">Enter your code</button>
                                </section>

                                <section class="coupon-content hidden" id="coupon-section">
                                    <p class="mb-3">If you have a coupon code, please apply it below.</p>
                                    <div class="input-wrapper-inline">
                                        <input type="text" name="coupon_code" class="form-control" placeholder="Coupon code"
                                            id="coupon_code">
                                        <button type="button" class="btn btn-primary" id="apply_coupon">
                                            Apply
                                        </button>
                                    </div>
                                    <div id="coupon_message" class="mt-2"></div>
                                </section>

                                <!-- Order Notes -->
                                <section class="form-group mt-4">
                                    <label for="order-notes" class="form-label">Order notes (optional)</label>
                                    <textarea class="form-control" id="order-notes" name="order-notes" rows="4"
                                        placeholder="Notes about your order, e.g. special notes for delivery"></textarea>
                                </section>
                            </div>

                            <!-- Right Column - Order Summary -->
                            <div class="checkout-right">
                                <section class="order-summary">
                                    <h2 class="title-sub">Your Order</h2>

                                    <table class="order-table">
                                        <thead>
                                            <tr>
                                                <th>Product</th>
                                                <th>Subtotal</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <% if (cart.items && cart.items.length > 0) { %>
                                                <% cart.items.forEach(item => { %>
                                                    <tr>
                                                        <td class="product-name" style="position:relative;">
                                                            <%= item.productName %>
                                                            <% if (item.selectedColor) { %>
                                                                <br><small>Color: <%= item.selectedColor %></small>
                                                            <% } %>
                                                            <% if (item.selectedSize) { %>
                                                                <br><small>Size: <%= item.selectedSize %></small>
                                                            <% } %>
                                                            <br><small>Qty: <%= item.quantity %></small>
                                                            <br>
                                                            <% if (item.basePrice && item.salePrice && item.basePrice > item.salePrice) { %>
                                                                <span style="color:#888;text-decoration:line-through;">
                                                                    â‚¹<%= item.basePrice.toFixed(2) %>
                                                                </span>
                                                                <span style="color:#e53935;font-weight:bold;">
                                                                    â‚¹<%= item.salePrice.toFixed(2) %>
                                                                </span>
                                                                <% if (item.discountPercent && item.discountPercent > 0) { %>
                                                                    <span style="display:inline-block;vertical-align:middle;margin-left:8px;position:relative;top:-2px;">
                                                                        <span style="background:linear-gradient(90deg,#ff512f,#dd2476);color:#fff;padding:4px 10px;border-radius:30px;font-weight:bold;font-size:0.98em;box-shadow:0 2px 8px #ffb3b3;display:inline-block;">
                                                                            <%= item.discountPercent %>% OFF
                                                                        </span>
                                                                    </span>
                                                                    <br>
                                                                    <span style="color:#388e3c;font-size:0.97em;display:inline-block;margin-top:2px;">
                                                                        Youâ€™re saving <b>â‚¹<%= item.discountAmount.toFixed(2) %></b> on this item! ðŸŽ‰
                                                                    </span>
                                                                <% } %>
                                                            <% } else { %>
                                                                <span style="color:#222;font-weight:bold;">
                                                                    â‚¹<%= (item.salePrice || item.basePrice || item.price).toFixed(2) %>
                                                                </span>
                                                            <% } %>
                                                        </td>
                                                        <td>
                                                            <% 
                                                                let unitPrice = (item.salePrice && item.salePrice < item.basePrice) ? item.salePrice : (item.basePrice || item.price);
                                                                let subtotal = unitPrice * item.quantity;
                                                            %>
                                                            â‚¹<%= subtotal.toFixed(2) %>
                                                        </td>
                                                    </tr>
                                                <% }); %>
                                            <% } else { %>
                                                <tr>
                                                    <td colspan="2">Your cart is empty</td>
                                                </tr>
                                            <% } %>
                                        </tbody>
                                        <tfoot>
                                            <tr>
                                                <th>Subtotal</th>
                                                <td id="cart-subtotal">â‚¹<%= cart.subtotal.toFixed(2) %></td>
                                            </tr>

                                            <% if (cart.couponInfo && cart.couponInfo.validated) { %>
                                                <tr id="discount-row">
                                                    <th>Discount (<%= cart.couponInfo.code %>)</th>
                                                    <td id="cart-discount">-â‚¹<%= cart.discountAmount.toFixed(2) %></td>
                                                </tr>
                                            <% } else { %>
                                                <tr id="discount-row" style="display: none;">
                                                    <th>Discount</th>
                                                    <td id="cart-discount">-â‚¹0.00</td>
                                                </tr>
                                            <% } %>

                                            <tr>
                                                <th>Shipping</th>
                                                <td>Free</td>
                                            </tr>

                                            <tr>
                                                <th>Total</th>
                                                <td id="cart-total">â‚¹<%= cart.total.toFixed(2) %></td>
                                            </tr>
                                        </tfoot>
                                    </table>

                                    <!-- Payment Methods -->
                                    <div class="payment-methods">
                                        <h3 class="title-sub mb-3">Payment Method</h3>

                                        <div class="payment-card">
                                            <div class="payment-header" data-target="credit-card">
                                                <span>Credit/Debit Card</span>
                                                <span>â†’</span>
                                            </div>
                                            <div class="payment-body" id="credit-card">
                                                <p>Pay securely using Visa, Mastercard, or RuPay cards.</p>
                                            </div>
                                        </div>

                                        <div class="payment-card">
                                            <div class="payment-header" data-target="upi">
                                                <span>UPI/Net Banking</span>
                                                <span>â†’</span>
                                            </div>
                                            <div class="payment-body" id="upi">
                                                <p>Quick payments through Google Pay, PhonePe, Paytm, or net banking.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Place Order Button -->
                                    <button class="btn btn-primary btn-block mt-4" id="placeOrderBtn" <%=cart.items &&
                                        cart.items.length===0 ? 'disabled' : '' %>>
                                        Place Order
                                    </button>
                                </section>
                            </div>
                        </div>
                    </div>

                    <!-- Hidden fields for selected addresses -->
                    <input type="hidden" name="billingAddressId" id="billingAddressId"
                        value="<%= defaultAddress ? defaultAddress._id : '' %>">
                    <input type="hidden" name="shippingAddressId" id="shippingAddressId"
                        value="<%= defaultAddress ? defaultAddress._id : '' %>">
                </div>
            </main>

            <style>
                /* Responsive checkout layout for mobile */
                .checkout-layout {
                    display: flex;
                    gap: 32px;
                }
                .checkout-left, .checkout-right {
                    flex: 1 1 0;
                    min-width: 0;
                }
                /* Address grid scroll for mobile */
                .address-grid.address-grid-scroll {
                    display: flex;
                    flex-wrap: wrap;
                    gap: 16px;
                }
                @media (max-width: 991.98px) {
                    .checkout-layout {
                        flex-direction: column;
                        gap: 24px;
                    }
                    .checkout-left, .checkout-right {
                        width: 100%;
                        min-width: 0;
                    }
                    .address-grid.address-grid-scroll {
                        flex-wrap: nowrap;
                        overflow-x: auto;
                        -webkit-overflow-scrolling: touch;
                        gap: 12px;
                        padding-bottom: 8px;
                    }
                    .address-card {
                        min-width: 260px;
                        max-width: 90vw;
                        flex: 0 0 auto;
                    }
                }
                @media (max-width: 575.98px) {
                    .address-card {
                        min-width: 220px;
                        max-width: 95vw;
                    }
                }
            </style>

            <!-- Address Modal -->
            <div id="address-modal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Add New Address</h3>
                        <button type="button" class="modal-close">&times;</button>
                    </div>
                    <div class="modal-body">
                        <form id="address-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="name" class="form-label">Full Name*</label>
                                    <input type="text" class="form-control" id="name" name="name" required>
                                </div>
                                <div class="form-group">
                                    <label for="phone" class="form-label">Mobile Number*</label>
                                    <input type="tel" class="form-control" id="phone" name="phone" required
                                        pattern="[6-9]{1}[0-9]{9}" maxlength="10">
                                    <small class="form-text">10-digit Indian mobile number</small>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="pincode" class="form-label">Pincode*</label>
                                    <input type="text" class="form-control" id="pincode" name="pincode" required>
                                </div>
                                <div class="form-group">
                                    <label for="state" class="form-label">State*</label>
                                    <input type="text" class="form-control" id="state" name="state" required>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="city" class="form-label">City*</label>
                                    <input type="text" class="form-control" id="city" name="city" required>
                                </div>
                                <div class="form-group">
                                    <label for="district" class="form-label">District</label>
                                    <input type="text" class="form-control" id="district" name="district">
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="addressLine1" class="form-label">Address Line 1*</label>
                                <input type="text" class="form-control" id="addressLine1" name="addressLine1" required>
                                <small class="form-text">Street address, P.O. box, company name</small>
                            </div>

                            <div class="form-group">
                                <label for="addressLine2" class="form-label">Address Line 2</label>
                                <input type="text" class="form-control" id="addressLine2" name="addressLine2">
                                <small class="form-text">Apartment, suite, unit, building, floor, etc.</small>
                            </div>

                            <div class="form-group">
                                <label for="landmark" class="form-label">Landmark</label>
                                <input type="text" class="form-control" id="landmark" name="landmark">
                                <small class="form-text">Nearby location for easier delivery</small>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="addressType" class="form-label">Address Type</label>
                                    <select class="form-control" id="addressType" name="addressType">
                                        <option value="Home">Home</option>
                                        <option value="Work">Work</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="checkbox-label">
                                        <input type="checkbox" class="checkbox-input" id="isDefault" name="isDefault">
                                        Set as default address
                                    </label>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" id="cancel-address">Cancel</button>
                        <button type="button" class="btn btn-primary" id="save-address">Save Address</button>
                    </div>
                </div>
            </div>
            <script>
                document.addEventListener('DOMContentLoaded', function () {
                    // Address Modal Handling
                    const addressModal = document.getElementById('address-modal');

                    // Show modal
                    document.getElementById('show-address-form')?.addEventListener('click', function () {
                        addressModal.classList.add('active');
                    });

                    document.getElementById('add-new-address-btn')?.addEventListener('click', function () {
                        addressModal.classList.add('active');
                    });

                    // Close modal
                    document.querySelector('.modal-close')?.addEventListener('click', function () {
                        addressModal.classList.remove('active');
                    });

                    document.getElementById('cancel-address')?.addEventListener('click', function () {
                        addressModal.classList.remove('active');
                    });
                    // Toggle coupon section
                    const couponToggle = document.getElementById('show-coupon');
                    if (couponToggle) {
                        couponToggle.addEventListener('click', function (e) {
                            e.preventDefault();
                            const couponSection = document.getElementById('coupon-section');
                            couponSection.classList.toggle('hidden');
                        });
                    }

                    // Address selection
                    document.querySelectorAll('.use-address-btn').forEach(button => {
                        button.addEventListener('click', function (e) {
                            e.preventDefault();
                            const addressCard = this.closest('.address-card');
                            const addressId = addressCard.dataset.addressId;
                            const addressType = addressCard.dataset.addressType;

                            // Highlight selected address
                            document.querySelectorAll(`.address-card[data-address-type="${addressType}"]`).forEach(card => {
                                card.classList.remove('selected');
                            });
                            addressCard.classList.add('selected');

                            // Set the selected address ID
                            document.getElementById(`${addressType}AddressId`).value = addressId;

                            // If "same as billing" is checked and we're selecting billing address, update shipping too
                            if (addressType === 'billing' && document.getElementById('same-as-billing').checked) {
                                document.getElementById('shippingAddressId').value = addressId;
                                document.querySelectorAll('.address-card[data-address-type="shipping"]').forEach(card => {
                                    card.classList.remove('selected');
                                    if (card.dataset.addressId === addressId) {
                                        card.classList.add('selected');
                                    }
                                });
                            }
                        });
                    });

                    // Same as billing checkbox
                    const sameAsBillingCheckbox = document.getElementById('same-as-billing');
                    if (sameAsBillingCheckbox) {
                        sameAsBillingCheckbox.addEventListener('change', function () {
                            const shippingContainer = document.getElementById('shipping-address-section'); // Changed ID here
                            if (this.checked) {
                                shippingContainer.classList.add('hidden');
                                const billingAddressId = document.getElementById('billingAddressId').value;
                                document.getElementById('shippingAddressId').value = billingAddressId;

                                // Highlight the same address for shipping
                                document.querySelectorAll('.address-card[data-address-type="shipping"]').forEach(card => {
                                    card.classList.remove('selected');
                                    if (card.dataset.addressId === billingAddressId) {
                                        card.classList.add('selected');
                                    }
                                });
                            } else {
                                shippingContainer.classList.remove('hidden');
                            }
                        });
                    }

                    // Different shipping address toggle
                    const differentShippingCheckbox = document.getElementById('different-shipping');
                    if (differentShippingCheckbox) {
                        differentShippingCheckbox.addEventListener('change', function () {
                            const shippingForm = document.getElementById('shipping-details-form');
                            if (shippingForm) {
                                shippingForm.classList.toggle('hidden', !this.checked);
                            }
                        });
                    }

                    // Address management
                    const addAddressBtn = document.getElementById('add-new-address');
                    if (addAddressBtn) {
                        addAddressBtn.addEventListener('click', function (e) {
                            e.preventDefault();
                            const modal = document.getElementById('addAddressModal');
                            if (modal) {
                                modal.classList.remove('hidden');
                            }
                        });
                    }

                    // Close modal
                    const modalClose = document.querySelector('.modal-close');
                    if (modalClose) {
                        modalClose.addEventListener('click', function () {
                            const modal = document.getElementById('addAddressModal');
                            if (modal) {
                                modal.classList.add('hidden');
                            }
                        });
                    }

                    const cancelNewAddress = document.getElementById('cancel-new-address');
                    if (cancelNewAddress) {
                        cancelNewAddress.addEventListener('click', function () {
                            const modal = document.getElementById('addAddressModal');
                            if (modal) {
                                modal.classList.add('hidden');
                            }
                        });
                    }

                    // Save new address
                    document.getElementById('save-address')?.addEventListener('click', async function () {
                        const form = document.getElementById('address-form');
                        const formData = {
                            name: form.querySelector('#name').value,
                            phone: form.querySelector('#phone').value,
                            pincode: form.querySelector('#pincode').value,
                            state: form.querySelector('#state').value,
                            city: form.querySelector('#city').value,
                            district: form.querySelector('#district').value || '',
                            addressLine1: form.querySelector('#addressLine1').value,
                            addressLine2: form.querySelector('#addressLine2').value || '',
                            landmark: form.querySelector('#landmark').value || '',
                            addressType: form.querySelector('#addressType').value,
                            isDefault: form.querySelector('#isDefault').checked
                        };

                        // Basic validation
                        if (!formData.name || !formData.phone || !formData.pincode ||
                            !formData.state || !formData.city || !formData.addressLine1) {
                            alert('Please fill in all required fields');
                            return;
                        }

                        // Phone number validation
                        if (!/^[6-9]\d{9}$/.test(formData.phone)) {
                            alert('Please enter a valid 10-digit Indian mobile number');
                            return;
                        }

                        // Pincode validation (basic 6-digit check)
                        if (!/^\d{6}$/.test(formData.pincode)) {
                            alert('Please enter a valid 6-digit pincode');
                            return;
                        }

                        try {
                            const saveBtn = document.getElementById('save-address');
                            saveBtn.disabled = true;
                            saveBtn.textContent = 'Saving...';

                            const response = await fetch('/create-address', {
                                method: 'POST',
                                headers: {
                                    'Content-Type': 'application/json',
                                },
                                body: JSON.stringify(formData)
                            });

                            const result = await response.json();

                            if (response.ok) {
                                // Success - close modal and refresh addresses
                                addressModal.classList.remove('active');
                                window.location.reload(); // Or update UI dynamically
                            } else {
                                alert(result.message || 'Failed to save address');
                            }
                        } catch (error) {
                            console.error('Error saving address:', error);
                            alert('Failed to save address. Please try again.');
                        } finally {
                            const saveBtn = document.getElementById('save-address');
                            if (saveBtn) {
                                saveBtn.disabled = false;
                                saveBtn.textContent = 'Save Address';
                            }
                        }
                    });

                    // Payment method accordion
                    document.querySelectorAll('.payment-header').forEach(header => {
                        header.addEventListener('click', function () {
                            const targetId = this.dataset.target;
                            const target = document.getElementById(targetId);

                            if (!target) return;

                            // Close all first
                            document.querySelectorAll('.payment-body').forEach(body => {
                                if (body.id !== targetId) {
                                    body.classList.remove('expanded');
                                    const arrow = body.closest('.payment-card')?.querySelector('.payment-header span:last-child');
                                    if (arrow) arrow.textContent = 'â†’';
                                }
                            });

                            // Toggle the clicked one
                            target.classList.toggle('expanded');

                            // Rotate arrow
                            const arrow = this.querySelector('span:last-child');
                            if (arrow) {
                                arrow.textContent = target.classList.contains('expanded') ? 'â†“' : 'â†’';
                            }
                        });
                    });

                    // Apply coupon
                    const applyCouponBtn = document.getElementById('apply_coupon');
                    if (applyCouponBtn) {
                        applyCouponBtn.addEventListener('click', async function (e) {
                            e.preventDefault();

                            const couponCodeInput = document.getElementById('coupon_code');
                            const couponMessage = document.getElementById('coupon_message');
                            const couponCode = couponCodeInput.value.trim();

                            // Clear previous messages
                            couponMessage.innerHTML = '';

                            if (!couponCode) {
                                couponMessage.innerHTML = '<div class="alert alert-error">Please enter a coupon code</div>';
                                return;
                            }

                            applyCouponBtn.disabled = true;  // disable button to prevent multiple clicks
                            applyCouponBtn.textContent = 'Applying...';

                            try {
                                const response = await fetch('/apply-coupon', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({ couponCode }),
                                });

                                if (!response.ok) {
                                    // Try to parse error message from backend
                                    const errorResult = await response.json().catch(() => null);
                                    const errMsg = errorResult?.message || 'Network error applying coupon';
                                    couponMessage.innerHTML = `<div class="alert alert-error">${errMsg}</div>`;
                                } else {
                                    const result = await response.json();

                                    if (result.success) {
                                        couponMessage.innerHTML = '<div class="alert alert-success">Coupon applied successfully!</div>';

                                        // Update all the displayed values (you probably already have this)
                                        updateCartTotals(result.cart);
                                    } else {
                                        // Show backend validation message like "Coupon already applied", "Invalid or expired coupon", etc.
                                        couponMessage.innerHTML = `<div class="alert alert-error">${result.message || 'Failed to apply coupon'}</div>`;
                                    }
                                }
                            } catch (error) {
                                console.error('Coupon application error:', error);
                                couponMessage.innerHTML = '<div class="alert alert-error">Failed to apply coupon. Please try again.</div>';
                            } finally {
                                applyCouponBtn.disabled = false;
                                applyCouponBtn.textContent = 'Apply Coupon';
                            }
                        });
                    }

                    function updateCartTotals(cart) {
                        // Update subtotal
                        const subtotalElement = document.querySelector('tfoot tr:first-child td');
                        if (subtotalElement) subtotalElement.textContent = `â‚¹${cart.subtotal.toFixed(2)}`;

                        // Update discount row (show/hide as needed)
                        const discountRow = document.querySelector('tfoot tr:nth-child(2)');
                        if (cart.couponInfo?.validated) {
                            discountRow.style.display = '';
                            discountRow.querySelector('th').textContent = `Discount (${cart.couponInfo.code})`;
                            discountRow.querySelector('td').textContent = `-â‚¹${cart.discountAmount.toFixed(2)}`;
                        } else {
                            discountRow.style.display = 'none';
                        }

                        // Update total
                        const totalElement = document.querySelector('tfoot tr:last-child td');
                        if (totalElement) totalElement.textContent = `â‚¹${cart.total.toFixed(2)}`;
                    }

                    // Place order button
                    const placeOrderBtn = document.getElementById('place-order-btn');
                    if (placeOrderBtn) {
                        placeOrderBtn.addEventListener('click', async function (e) {
                            e.preventDefault();

                            // Validate address selection
                            const billingAddressId = document.getElementById('billingAddressId').value;
                            const shippingAddressId = document.getElementById('shippingAddressId').value;

                            if (!billingAddressId || !shippingAddressId) {
                                alert('Please select both billing and shipping addresses');
                                return;
                            }

                            // Disable button to prevent multiple submissions
                            const submitBtn = this;
                            submitBtn.disabled = true;
                            submitBtn.textContent = 'Processing...';

                            try {
                                const response = await fetch('/place-order', {
                                    method: 'POST',
                                    headers: {
                                        'Content-Type': 'application/json',
                                    },
                                    body: JSON.stringify({
                                        billingAddressId,
                                        shippingAddressId,
                                        total,
                                        notes: document.getElementById('order-notes').value
                                    })
                                });

                                const result = await response.json();

                                if (result.success) {
                                    window.location.href = `/order-confirmation/${result.orderId}`;
                                } else {
                                    alert(result.message || 'Failed to place order');
                                    submitBtn.disabled = false;
                                    submitBtn.textContent = 'Place Order';
                                }
                            } catch (error) {
                                console.error('Order placement error:', error);
                                alert('An error occurred while placing your order');
                                submitBtn.disabled = false;
                                submitBtn.textContent = 'Place Order';
                            }
                        });
                    }

                });
            </script>
            <script>
                placeOrderBtn.addEventListener('click', async function (e) {
                    e.preventDefault();

                    const billingAddressId = document.getElementById('billingAddressId').value;
                    const shippingAddressId = document.getElementById('shippingAddressId').value;

                    if (!billingAddressId || !shippingAddressId) {
                        alert('Please select both billing and shipping addresses');
                        return;
                    }

                    const totalText = document.getElementById('cart-total').innerText;
                    const totalAmount = parseFloat(totalText.replace(/[^\d.-]/g, ''));

                    if (isNaN(totalAmount) || totalAmount <= 0) {
                        alert('Invalid total amount!');
                        return;
                    }

                    const response = await fetch('/place-order', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        credentials: 'include',
                        body: JSON.stringify({
                            billingAddressId,
                            shippingAddressId,
                            totalAmount
                        })
                    });

                    const data = await response.json();

                    if (data.success) {
                        const options = {
                            key: data.key,
                            amount: data.amount,
                            currency: data.currency,
                            name: "Stayrare",
                            description: "Order Payment",
                            order_id: data.razorpayOrderId,
                            handler: async function (response) {
                                const confirmRes = await fetch('/confirm-order', {
                                    method: 'POST',
                                    headers: { 'Content-Type': 'application/json' },
                                    body: JSON.stringify({
                                        razorpay_payment_id: response.razorpay_payment_id,
                                        razorpay_order_id: response.razorpay_order_id,
                                        razorpay_signature: response.razorpay_signature,
                                        billingAddressId,
                                        shippingAddressId
                                    })
                                });

                                const confirmData = await confirmRes.json();
                                if (confirmData.success) {
                                    window.location.href = `/order-confirmation/${confirmData.orderId}`;
                                } else {
                                    alert('Payment succeeded but order creation failed!');
                                }
                            },
                            theme: { color: "#001F3F" }
                        };

                        const rzp = new Razorpay(options);
                        rzp.open();
                    } else {
                        alert('Failed to create Razorpay order!');
                    }
                });
            </script>

        </main>
    <!-- End of PageContent -->
   <footer class="footer footer_type_2 dark">


    <div class="footer-middle container">
      <div class="row row-cols-lg-5 row-cols-2">
        <div class="footer-column footer-store-info col-12 mb-4 mb-lg-0">
 <div>
  <img class="footer-logo" src="images/stayrare/footer-logo.png" alt="">
 </div>
   <p class="footer-address">Stayrare , Thiruvananthapuram, <br> Kerala , India - 695002
</p>
          <p class="m-0">
           <a style="color: white;" href="mailto:stayrareofficial@gmail.com">âœ‰ï¸ <strong class="fw-medium">stayrareofficial@gmail.com</strong></a>
          </p>
          <p>
<a style="color: white;" href="tel:+916238669487"> <svg width="16" height="16" viewBox="0 0 24 24"
                fill="white" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M6.62 10.79a15.05 15.05 0 006.59 6.59l2.2-2.2a1 1 0 011.05-.24c1.12.37 2.33.57 3.54.57a1 1 0 011 1v3.5a1 1 0 01-1 1C10.07 21 3 13.93 3 5.5a1 1 0 011-1H7.5a1 1 0 011 1c0 1.21.2 2.42.57 3.54a1 1 0 01-.24 1.05l-2.2 2.2z" />
              </svg>
              <strong class="fw-medium">+91 62 38669 487</strong></a>
          </p>
         

         
    
        </div><!-- /.footer-column -->

        <div class="footer-column footer-menu mb-4 mb-lg-0">
          <h6 class="sub-menu__title text-uppercase">Company</h6>
          <ul class="sub-menu__list list-unstyled">
            <li class="sub-menu__item"><a href="/" class="menu-link menu-link_us-s">Home</a></li>
            <li class="sub-menu__item"><a href="/about" class="menu-link menu-link_us-s">About Us</a></li>
                  <li class="sub-menu__item"><a href="/wishlist" class="menu-link menu-link_us-s">Wishlist</a></li>
            <li class="sub-menu__item"><a href="/blogs" class="menu-link menu-link_us-s">Blogs</a></li>
            <li class="sub-menu__item"><a href="/contact" class="menu-link menu-link_us-s">Contact Us</a></li>
          </ul>
        </div><!-- /.footer-column -->

        <div class="footer-column footer-menu mb-4 mb-lg-0">
          <h6 class="sub-menu__title text-uppercase">Shop</h6>
          <ul class="sub-menu__list list-unstyled">
            <li class="sub-menu__item"><a href="/store" class="menu-link menu-link_us-s">New Arrivals</a></li>
            <li class="sub-menu__item"><a href="/store" class="menu-link menu-link_us-s">Best Deals</a></li>
            <li class="sub-menu__item"><a href="/store" class="menu-link menu-link_us-s">Best Seller</a></li>
            <li class="sub-menu__item"><a href="/store" class="menu-link menu-link_us-s">Top Rated</a></li>
            <li class="sub-menu__item"><a href="/store" class="menu-link menu-link_us-s">Shop All</a></li>
          </ul>
        </div><!-- /.footer-column -->

        <div class="footer-column footer-menu mb-4 mb-lg-0">
          <h6 class="sub-menu__title text-uppercase">Help</h6>
          <ul class="sub-menu__list list-unstyled">
               <li class="sub-menu__item"><a href="/return_policy" class="menu-link menu-link_us-s">Return & Refund Policy</a></li>
            <li class="sub-menu__item"><a href="/account" class="menu-link menu-link_us-s">My Account</a></li>
            <li class="sub-menu__item"><a href="/terms_and_conditions" class="menu-link menu-link_us-s">Terms & Conditions</a></li>
            <li class="sub-menu__item"><a href="/privacy_policy" class="menu-link menu-link_us-s">Legal & Privacy</a></li>
            <li class="sub-menu__item"><a href="/shipping_policy" class="menu-link menu-link_us-s">Shipping Policy</a></li>

          </ul>
        </div><!-- /.footer-column -->
        <div class="footer-column footer-newsletter col-12 mb-4 mb-lg-0">
          <h5 class="sub-menu__title text-uppercase">Subscribe</h5>
          <p>Donâ€™t miss a drop  get product alerts, restock updates, and more delivered directly to you!</p>
          <form action="https://uomo-html.flexkitux.com/Demo2//" class="footer-newsletter__form position-relative bg-body">
            <input class="form-control border-white" type="email" name="email" placeholder="Your email address">
            <input class="btn-link fw-medium bg-white position-absolute top-0 end-0 h-100" type="submit" value="JOIN">
          </form>
                 <ul class="social-links list-unstyled d-flex flex-wrap mb-0 mt-3">
            <li>
              <a href="https://www.facebook.com/profile.php?id=61578094636322 " class="footer__social-link d-block">
                <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0,0,256,256">
<g fill="#fffcfc" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(10.66667,10.66667)"><path d="M17.525,9h-3.525v-2c0,-1.032 0.084,-1.682 1.563,-1.682h1.868v-3.18c-0.909,-0.094 -1.823,-0.14 -2.738,-0.138c-2.713,0 -4.693,1.657 -4.693,4.699v2.301h-3v4l3,-0.001v9.001h4v-9.003l3.066,-0.001z"></path></g></g>
</svg>
              </a>
            </li>
            <li>
              <a href="https://www.twitter.com/" class="footer__social-link d-block">
                <svg class="svg-icon svg-icon_x" width="14" height="13" viewBox="0 0 1200 1227" xmlns="http://www.w3.org/2000/svg" fill="currentColor">
  <path d="M 880 0 L 585 455 L 290 0 H 0 L 425 623 L 0 1227 H 290 L 585 772 L 880 1227 H 1170 L 745 623 L 1170 0 Z"/>
</svg>
              </a>
            </li>
            <li>
              <a href="https://www.instagram.com/" class="footer__social-link d-block">
               <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="20" height="20" viewBox="0,0,256,256">
<g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(10.66667,10.66667)"><path d="M8,3c-2.757,0 -5,2.243 -5,5v8c0,2.757 2.243,5 5,5h8c2.757,0 5,-2.243 5,-5v-8c0,-2.757 -2.243,-5 -5,-5zM8,5h8c1.654,0 3,1.346 3,3v8c0,1.654 -1.346,3 -3,3h-8c-1.654,0 -3,-1.346 -3,-3v-8c0,-1.654 1.346,-3 3,-3zM17,6c-0.55228,0 -1,0.44772 -1,1c0,0.55228 0.44772,1 1,1c0.55228,0 1,-0.44772 1,-1c0,-0.55228 -0.44772,-1 -1,-1zM12,7c-2.757,0 -5,2.243 -5,5c0,2.757 2.243,5 5,5c2.757,0 5,-2.243 5,-5c0,-2.757 -2.243,-5 -5,-5zM12,9c1.654,0 3,1.346 3,3c0,1.654 -1.346,3 -3,3c-1.654,0 -3,-1.346 -3,-3c0,-1.654 1.346,-3 3,-3z"></path></g></g>
</svg>
              </a>
            </li>
            <li>
              <a href="https://www.youtube.com/" class="footer__social-link d-block">
                <svg class="svg-icon svg-icon_youtube" width="16" height="11" viewBox="0 0 16 11" xmlns="http://www.w3.org/2000/svg"><path d="M15.0117 1.8584C14.8477 1.20215 14.3281 0.682617 13.6992 0.518555C12.5234 0.19043 7.875 0.19043 7.875 0.19043C7.875 0.19043 3.19922 0.19043 2.02344 0.518555C1.39453 0.682617 0.875 1.20215 0.710938 1.8584C0.382812 3.00684 0.382812 5.46777 0.382812 5.46777C0.382812 5.46777 0.382812 7.90137 0.710938 9.07715C0.875 9.7334 1.39453 10.2256 2.02344 10.3896C3.19922 10.6904 7.875 10.6904 7.875 10.6904C7.875 10.6904 12.5234 10.6904 13.6992 10.3896C14.3281 10.2256 14.8477 9.7334 15.0117 9.07715C15.3398 7.90137 15.3398 5.46777 15.3398 5.46777C15.3398 5.46777 15.3398 3.00684 15.0117 1.8584ZM6.34375 7.68262V3.25293L10.2266 5.46777L6.34375 7.68262Z"/></svg>
              </a>
            </li>
      
          </ul>

     
        </div><!-- /.footer-column -->
      </div><!-- /.row-cols-5 -->
    </div><!-- /.footer-middle container -->

    <div class="footer-bottom">
      <div class="container d-md-flex align-items-center">
        <span class="footer-copyright me-auto">Copyright Â© 2025 StayRare. All Rights Reserved.  |  developed by Trivlogic Pvt Ltd

</span>
       
      </div><!-- /.container d-flex align-items-center -->
    </div><!-- /.footer-bottom container -->
  </footer>
  <!-- End Footer Type 1 -->

  <!-- Mobile Fixed Footer -->
  <footer class="footer-mobile container w-100 px-5 d-md-none bg-body">
    <div class="row text-center">
      <div class="col-3">
        <a href="/" class="footer-mobile__link d-flex flex-column align-items-center">
          <img style="width: 25px; height: 25px;" src="/images/home-icon.png" alt="stayrare">
          <span>Home</span>
        </a>
      </div><!-- /.col-3 -->

      <div class="col-3">
        <a href="/store" class="footer-mobile__link d-flex flex-column align-items-center">
          <img style="width: 25px; height: 25px;" src="/images/shop-icon.png" alt="stayrare">
          <span>Shop</span>
        </a>
      </div><!-- /.col-3 -->
      <div class="col-3">
        <a href="/wishlist" class="footer-mobile__link d-flex flex-column align-items-center">
          <div class="position-relative">
                    <svg class="d-block" width="20" height="20" viewBox="0 0 20 20" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <use href="#icon_heart" />
          </svg>
          </div>
          <span>Wishlist</span>
        </a>
      </div><!-- /.col-3 -->
            <div class="col-3">
        <a href="<%= user ? '/account' : '/auth/login' %>" class="footer-mobile__link d-flex flex-column align-items-center">
          <div class="position-relative">
                            <svg width="20" height="20": class="icon-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/>
                <circle cx="12" cy="7" r="4"/>
            </svg>
          </div>
          <span>Account</span>
        </a>
      </div><!-- /.col-3 -->
    </div><!-- /.row -->
  </footer><!-- /.footer-mobile container position-fixed d-md-none bottom-0 -->

    <!-- End of Footer -->
    </div>
    <!-- End of Page Wrapper -->







  <div id="scrollTop" class="visually-hidden end-0"></div>
    <script>
        window.isLoggedIn = <%= user ? 'true' : 'false' %>;
    </script>
    <!-- End of Mobile Menu -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

    <!-- Plugin JS File -->
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

    <script src="/js/main.min.js"></script>
    <script src="/js/script.js"></script>
     <script src="/js/plugins/jquery.min.js"></script>
  <script src="/js/plugins/bootstrap.bundle.min.js"></script>
  <script src="/js/plugins/bootstrap-slider.min.js"></script>
  
  <script src="/js/plugins/swiper.min.js"></script>
  <script src="/js/plugins/countdown.js"></script>
  <script src="/js/plugins/jquery.fancybox.js"></script>

  <!-- Footer Scripts -->
  <script src="/js/theme.js"></script>
     <script>
        // Fallback: If SVG doesn't render, this script will replace them with Unicode symbols
        document.addEventListener('DOMContentLoaded', function() {
            const icons = document.querySelectorAll('.icon-svg');
            let allSvgsLoaded = true;
            
            icons.forEach(function(icon) {
                if (icon.getBBox && icon.getBBox().width === 0) {
                    allSvgsLoaded = false;
                }
            });
            
            if (!allSvgsLoaded) {
                // Replace with Unicode fallbacks
                const iconContainer = document.querySelector('.icon-container');
                iconContainer.innerHTML = `
                    <div class="icon">
                        <div style="font-size: 24px; line-height: 32px; text-align: center;">ðŸ‘¤</div>
                        <div class="badge">5</div>
                    </div>
                    <div class="icon">
                        <div style="font-size: 24px; line-height: 32px; text-align: center;">â¤ï¸</div>
                        <div class="badge">2</div>
                    </div>
                    <div class="icon">
                        <div style="font-size: 24px; line-height: 32px; text-align: center;">ðŸ›ï¸</div>
                        <div class="badge">3</div>
                    </div>
                `;
            }
        });
    </script>
</body>



</html>