<!DOCTYPE html>
<html lang="en">
<meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->

<head>
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-KTMNTPV3');</script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>Hofmaan | Cart</title>

    <meta name="keywords" content="Hofmaan" />
    <meta name="description" content="Hofmaan">
    <meta name="author" content="Trivlogic">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/images/logo-2.png">

    <!-- WebFont.js -->
    <script>
        WebFontConfig = {
            google: { families: ['Poppins:400,500,600,700'] }
        };
        (function (d) {
            var wf = d.createElement('script'), s = d.scripts[0];
            wf.src = '/js/webfont.js';
            wf.async = true;
            s.parentNode.insertBefore(wf, s);
        })(document);
    </script>

    <link rel="preload" href="/vendor/fontawesome-free/webfonts/fa-regular-400.woff2" as="font" type="font/woff2"
        crossorigin="anonymous">
    <link rel="preload" href="/vendor/fontawesome-free/webfonts/fa-solid-900.woff2" as="font" type="font/woff2"
        crossorigin="anonymous">
    <link rel="preload" href="/vendor/fontawesome-free/webfonts/fa-brands-400.woff2" as="font" type="font/woff2"
        crossorigin="anonymous">
    <link rel="preload" href="/fonts/wolmart87d5.woff?png09e" as="font" type="font/woff" crossorigin="anonymous">

    <!-- Vendor CSS -->
    <link rel="stylesheet" type="text/css" href="/vendor/fontawesome-free/css/all.min.css">

    <!-- Plugin CSS -->
    <link rel="stylesheet" type="text/css" href="/vendor/magnific-popup/magnific-popup.min.css">

    <!-- Default CSS -->
    <link rel="stylesheet" type="text/css" href="/css/style.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>

<body>
    <div class="page-wrapper">

        <!-- Start of Header -->
        <header class="header">
            <div class="header-top">
                <div class="container">
                    <div class="header-left">
                        <p class="welcome-msg">Welcome to Hofmaan Store! Offers Available</p>
                    </div>
                    <div class="header-right">
                        <span class="divider d-lg-show"></span>
                        <a href="/store" class="d-lg-show">Store</a>
                        <a href="/about" class="d-lg-show">About Us</a>
                        <a href="/contact" class="d-lg-show">Contact Us</a>
                        <% if (user) { %>
                            <a href="/account" class="d-lg-show"><i class="w-icon-account"></i>Profile</a>
                            <span class="delimiter d-lg-show">/</span>
                            <a href="/orders" class="ml-0 d-lg-show">My Orders</a>
                            <% } else { %>
                                <a href="/auth/login" class="d-lg-show"><i class="w-icon-account"></i>Sign In</a>
                                <span class="delimiter d-lg-show">/</span>
                                <a href="/auth/login" class="ml-0 d-lg-show">Register</a>
                                <% } %>
                    </div>
                </div>
            </div>
            <!-- End of Header Top -->
            <div class="header-middle sticky-content fix-top sticky-header border-no">
                <div class="container">
                    <div class="header-left mr-md-4">
                        <a href="#" class="mobile-menu-toggle  w-icon-hamburger"></a>
                        <a href="/" class="logo">
                            <img src="/images/logo.png" alt="logo" width="200">
                        </a>
                        <form class="input-wrapper header-search hs-expanded hs-round d-none d-md-flex" id="searchForm" style="position:relative;">
                            <div class="custom-search-bar w-100">
                                <input type="text" class="form-control" name="q" id="searchInput"
                                    placeholder="Search for products..." autocomplete="off" />
                                <button class="btn btn-search" type="submit" aria-label="Search">
                                    <i class="w-icon-search"></i>
                                </button>
                            </div>
                            <div id="searchSuggestions" class="search-suggestions"></div>
                        </form>
                        <div id="searchResults" class="search-results-container"></div>
                    </div>
                    <div class="header-right ml-4">
                        <div class="header-call d-xs-show d-lg-flex align-items-center">
                            <a href="tel:+919400947122" class="w-icon-call"></a>
                            <div class="call-info d-lg-show">
                                <h4 class="chat font-size-md text-normal ls-normal text-white mb-0">
                                    <a href="tel:+919400947122" class="text-capitalize text-primary font-weight-normal">Customer care</a>
                                </h4>
                                <a href="tel:+919400947122" class="phone-number font-weight-bolder ls-50">+91 9400947122</a>
                            </div>
                        </div>
                        <a class="wishlist label-down link d-xs-show" href="/wishlist">
                            <i class="w-icon-heart"></i>
                            <span class="wishlist-label d-lg-show">Wishlist</span>
                        </a>
                        <div class="dropdown cart-dropdown cart-offcanvas mr-0 mr-lg-2">
                            <div class="cart-overlay"></div>
                            <a href="/cart" class="cart-toggle label-down link">
                                <i class="w-icon-cart">
                                    <span class="cart-count text-white">
                                        <% if (user) { %>
                                            <%= cartItems && cartItems.length ? cartItems.length : " " %>
                                        <% } else { %>
                                            <span id="guest-cart-count"></span>
                                            <script>
                                                document.addEventListener('DOMContentLoaded', function() {
                                                    var guestCartCount = document.getElementById('guest-cart-count');
                                                    var guestCart = localStorage.getItem('guestCart');
                                                    var count = 0;
                                                    if (guestCart) {
                                                        try {
                                                            var cartArr = JSON.parse(guestCart);
                                                            if (Array.isArray(cartArr)) {
                                                                count = cartArr.length;
                                                            }
                                                        } catch (e) {}
                                                    }
                                                    guestCartCount.textContent = count > 0 ? count : " ";
                                                });
                                            </script>
                                        <% } %>
                                    </span>
                                </i>
                                <span class="cart-label">Cart</span>
                            </a>
                            <div class="dropdown-box">
                                <div class="cart-header">
                                    <span>Shopping Cart</span>
                                    <a href="#" class="btn-close">Close<i class="w-icon-long-arrow-right"></i></a>
                                </div>
                                <div class="products" id="cart-products-list">
                                    <% if (user && cartItems && cartItems.length > 0) { %>
                                      <% cartItems.slice(0, 6).forEach(function(item) { %>
                                        <div class="product product-cart">
                                          <div class="product-detail">
                                            <a href="/product/<%= item.product %>" class="product-name">
                                              <%= item.productName %>
                                            </a>
                                            <div class="price-box">
                                              <span class="product-quantity">
                                                <%= item.quantity %>
                                              </span>
                                              <span class="product-price ml-2">
                                                â‚¹<%= item.price ? item.price.toFixed(2) : '0.00' %>
                                              </span>
                                            </div>
                                          </div>
                                          <figure class="product-media">
                                            <img src="<%= item.productImage %>" alt="product" height="84" width="94">
                                          </figure>
                                        </div>
                                      <% }); %>
                                    <% } else if (!user) { %>
                                      <!-- Guest cart will be rendered by JS -->
                                    <% } else { %>
                                      <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
                                      <div class="text-center py-5 mt-4">
                                        <dotlottie-player src="https://lottie.host/c097ea34-ef42-4648-b414-ea2e2c41fadb/niX10ZFY4C.lottie" background="transparent" speed="1" style="width: 300px; height: 300px" loop autoplay></dotlottie-player>
                                        <span class="mt-5">Your cart is empty.</span>
                                      </div>
                                    <% } %>
                                  </div>
                                  
                                <div class="cart-total" id="cart-subtotal-section">
                                    <label>Subtotal:</label>
                                    <span class="price" id="cart-subtotal-amount">
                                        â‚¹<%= user && typeof cartSubtotal === 'number' ? cartSubtotal.toFixed(2) : '0.00' %>
                                    </span>
                                </div>
                                <div class="cart-action">
                                    <a href="/cart" class="btn btn-dark btn-outline btn-rounded">View Cart</a>
                                    <a href="/checkout" class="btn btn-primary btn-rounded">Checkout</a>
                                </div>
                            </div>
                            <% if (!user) { %>
                            <script>
                                // Guest cart rendering for non-logged-in users
                                function renderGuestCart() {
                                    const cartProductsList = document.getElementById('cart-products-list');
                                    const subtotalSection = document.getElementById('cart-subtotal-amount');
                                    let guestCart = localStorage.getItem('guestCart');
                                    if (!guestCart) {
                                        cartProductsList.innerHTML = '<div class="text-center py-3"><span>Your cart is empty.</span></div>';
                                        subtotalSection.textContent = 'â‚¹0.00';
                                        return;
                                    }
                                    try {
                                        guestCart = JSON.parse(guestCart);
                                    } catch (e) {
                                        cartProductsList.innerHTML = '<div class="text-center py-3"><span>Your cart is empty.</span></div>';
                                        subtotalSection.textContent = 'â‚¹0.00';
                                        return;
                                    }
                                    // guestCart is now an array of cart items
                                    if (!Array.isArray(guestCart) || guestCart.length === 0) {
                                        cartProductsList.innerHTML = '<div class="text-center py-3"><span>Your cart is empty.</span></div>';
                                        subtotalSection.textContent = 'â‚¹0.00';
                                        return;
                                    }
                                    let html = '';
                                    let subtotal = 0;
                                    guestCart.forEach(function(item) {
                                        subtotal += (item.price || 0) * (item.quantity || 1);
                                        html += `
                                            <div class="product product-cart">
                                                <div class="product-detail">
                                                    <a href="/product/${item.productId}" class="product-name">
                                                        ${item.productName || ''}
                                                    </a>
                                                    <div class="price-box">
                                                        <span class="product-quantity">
                                                            ${item.quantity || 1}
                                                        </span>
                                                        <span class="product-price ml-2">
                                                            â‚¹${item.price ? Number(item.price).toFixed(2) : '0.00'}
                                                        </span>
                                                   </div>
                                                </div>
                                                <figure class="product-media">
                                                    <img src="${item.productImage || ''}" alt="product" height="84" width="94">
                                                </figure>
                                            </div>
                                        `;
                                    });
                                    cartProductsList.innerHTML = html;
                                    subtotalSection.textContent = 'â‚¹' + subtotal.toFixed(2);
                                }
                                document.addEventListener('DOMContentLoaded', renderGuestCart);
                            </script>
                            <% } %>
                            <!-- End of Dropdown Box -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- End of Header Middle -->
        </header>
        <!-- End of Header -->

        <!-- Start of Main -->
        <main class="main cart">
            <!-- Start of Breadcrumb -->
            <nav class="breadcrumb-nav">
                <div class="container">
                    <ul class="breadcrumb shop-breadcrumb bb-no">
                        <li class="active"><a href="/cart">Shopping Cart</a></li>
                        <li><a href="/checkout">Checkout</a></li>

                    </ul>
                </div>
            </nav>
            <!-- End of Breadcrumb -->


            <!-- Start of PageContent -->
            <div class="page-content">
                <div class="container">
                    <div class="row gutter-lg mb-10">
                        <div class="col-lg-8 pr-lg-4 mb-6">
                            <table class="shop-table cart-table">
                                <thead>
                                    <tr>
                                        <th class="product-name"><span>Product</span></th>
                                        <th></th>
                                        <th class="product-price"><span>Price</span></th>
                                        <th class="product-quantity"><span>Quantity</span></th>
                                        <th class="product-subtotal"><span>Subtotal</span></th>
                                    </tr>
                                </thead>
                                <tbody id="cart-items-body">
                                    <!-- Cart items will be rendered here by JS -->
                                </tbody>
                            </table>

                            <div class="cart-action mb-6">
                                <a href="#" class="btn btn-dark btn-rounded btn-icon-left btn-shopping mr-auto"><i
                                        class="w-icon-long-arrow-left"></i>Continue Shopping</a>
                                <button id="clear-cart-btn" type="button" class="btn btn-rounded btn-default btn-clear"
                                    name="clear_cart" value="Clear Cart">Clear Cart</button>
                            </div>
                        </div>
                        <div class="col-lg-4 sticky-sidebar-wrapper">
                            <div class="sticky-sidebar">
                                <div class="cart-summary mb-4">
                                    <h3 class="cart-title text-uppercase">Cart Total</h3>
                                    <div class="order-total d-flex justify-content-between align-items-center"
                                        style="font-size:1.2em;">
                                        <label>Total</label>
                                        <span class="ls-50" id="cart-total">â‚¹0.00</span>
                                    </div>
                                    <a href="/checkout"
                                        class="btn btn-block btn-dark btn-icon-right btn-rounded btn-checkout"
                                        id="checkout-btn" style="margin-top:1.5em;">
                                        Proceed to checkout<i class="w-icon-long-arrow-right"></i></a>
                                    <a href="/auth/login"
                                        class="btn btn-block btn-primary btn-icon-right btn-rounded btn-login-continue"
                                        id="login-continue-btn" style="display:none; margin-top:1.5em;">
                                        Login to continue<i class="w-icon-long-arrow-right"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <script src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs" type="module"></script>
            <script>
                // Helper: Format price
                function formatPrice(amount) {
                    return 'â‚¹' + (amount ? Number(amount).toFixed(2) : '0.00');
                }

                // Toastify helper
                function showToast(msg, type = "info") {
                    Toastify({
                        text: msg,
                        duration: 3000,
                        gravity: "top",
                        position: "right",
                        backgroundColor: type === "error" ? "#e74c3c" : (type === "success" ? "#27ae60" : "#3498db"),
                        close: true,
                        stopOnFocus: true
                    }).showToast();
                }

                // State: is user logged in?
                let user = false;

                // Fetch cart items (user or guest)
                async function fetchCart() {
                    try {
                        let res = await fetch('/cartItems', { credentials: 'include' });
                        if (!res.ok) throw new Error('Not logged in');
                        let cart = await res.json();
                        if (!cart || !cart.items) cart = { items: [] };
                        user = true;
                        renderCart(cart, true);
                    } catch (e) {
                        // Guest cart from localStorage
                        user = false;
                        let items = [];
                        try {
                            items = JSON.parse(localStorage.getItem('guestCart') || '[]');
                            if (!Array.isArray(items)) items = [];
                        } catch (err) {
                            items = [];
                        }
                        // Calculate total for guest
                        let total = 0;
                        items.forEach(item => {
                            let price = (item.price !== undefined && item.price !== null) ? Number(item.price) : 0;
                            total += price * (item.quantity || 1);
                        });
                        let cart = { items, total: total };
                        renderCart(cart, false);
                    }
                }

                // Render cart items and totals
                function renderCart(cart, user) {
                    const tbody = document.getElementById('cart-items-body');
                    tbody.innerHTML = '';
                    if (!cart.items || cart.items.length === 0) {
                        tbody.innerHTML = `
                            <tr>
                                <td colspan="5">
                                    <div style="display: flex; flex-direction: column; align-items: center; justify-content: center;">
                                        <dotlottie-player src="https://lottie.host/c097ea34-ef42-4648-b414-ea2e2c41fadb/niX10ZFY4C.lottie" background="transparent" speed="1" style="width: 300px; height: 300px" loop autoplay></dotlottie-player>
                                        <span style="font-size: 1.2rem;">Your cart is empty.</span>
                                    </div>
                                </td>
                            </tr>
                        `;
                    } else {
                        cart.items.forEach((item, idx) => {
                            const price = (item.price !== undefined && item.price !== null) ? Number(item.price) : 0;
                            const productName = item.productName || (item.product && item.product.name) || 'Product';
                            const productImage = item.productImage || (item.product && item.product.images && item.product.images[0]) || '/images/placeholder.png';
                            const productId = item.productId || (item.product && item.product._id) || '';
                            // For user: use item._id; for guest: use idx (array index)
                            const itemId = user ? item._id : idx;

                            tbody.innerHTML += `
                        <tr data-item-id="${itemId}" data-is-user="${user}">
                            <td class="product-thumbnail">
                                <div class="p-relative">
                                    <a href="/product/${productId}">
                                        <figure class='cart-img'>
                                            <img src="${productImage}" alt="product" width="80" height="80">
                                        </figure>
                                    </a>
                                    <button type="button" class="btn btn-close" onclick="removeCartItem('${itemId}', ${user})"><i class="fas fa-times"></i></button>
                                </div>
                            </td>
                            <td class="product-name">
                                <a href="/product/${productId}">
                                    ${productName}
                                </a>
                                ${item.selectedColor ? `<div><small>Color: ${item.selectedColor}</small></div>` : ''}
                                ${item.selectedSize ? `<div><small>Size: ${item.selectedSize}</small></div>` : ''}
                            </td>
                            <td class="product-price"><span class="amount">${formatPrice(price)}</span></td>
                            <td class="product-quantity">
                                <div class="input-group">
                                    <input class="quantity form-control" type="number" min="1" max="100000" value="${item.quantity}" onchange="onQtyInputChange('${itemId}', this, ${user})">
                                    <button class="quantity-plus w-icon-plus" type="button" onclick="changeQty('${itemId}', 1, ${user})"></button>
                                    <button class="quantity-minus w-icon-minus" type="button" onclick="changeQty('${itemId}', -1, ${user})"></button>
                                </div>
                            </td>
                            <td class="product-subtotal">
                                <span class="amount">${formatPrice(price * (item.quantity || 1))}</span>
                            </td>
                        </tr>
                        `;
                        });
                    }
                    // Show total
                    document.getElementById('cart-total').textContent = formatPrice(cart.total || 0);

                    // Show correct button for user/guest
                    const checkoutBtn = document.getElementById('checkout-btn');
                    const loginBtn = document.getElementById('login-continue-btn');
                    if (!user) {
                        checkoutBtn.style.display = "none";
                        loginBtn.style.display = "";
                    } else {
                        checkoutBtn.style.display = "";
                        loginBtn.style.display = "none";
                    }
                }

                // Remove item from cart
                async function removeCartItem(itemId, user) {
                    if (user) {
                        try {
                            let res = await fetch(`/remove-cart/${itemId}`, { method: 'DELETE', credentials: 'include' });
                            if (!res.ok) throw new Error();
                            showToast('Item removed from cart.', 'success');
                            fetchCart();
                        } catch (e) {
                            showToast('Error removing item. Please try again.', 'error');
                        }
                    } else {
                        removeCartItemGuest(itemId);
                    }
                }

                function removeCartItemGuest(itemId) {
                    let items = [];
                    try {
                        items = JSON.parse(localStorage.getItem('guestCart') || '[]');
                        if (!Array.isArray(items)) items = [];
                    } catch (err) {
                        items = [];
                    }
                    // itemId is the array index for guest cart
                    itemId = parseInt(itemId);
                    if (!isNaN(itemId) && itemId >= 0 && itemId < items.length) {
                        items.splice(itemId, 1);
                        localStorage.setItem('guestCart', JSON.stringify(items));
                        showToast('Item removed from cart.', 'success');
                    }
                    fetchCart();
                }

                // Update quantity (with fix)
                async function updateCartQuantity(itemId, qty, user) {
                    qty = parseInt(qty);
                    if (isNaN(qty) || qty < 1) {
                        showToast('Quantity must be at least 1', 'error');
                        fetchCart();
                        return;
                    }
                    if (user) {
                        try {
                            let res = await fetch(`/update-cart/${itemId}`, {
                                method: 'PUT',
                                headers: { 'Content-Type': 'application/json' },
                                credentials: 'include',
                                body: JSON.stringify({ quantity: qty })
                            });
                            if (!res.ok) {
                                let msg = 'Error updating quantity. Please try again.';
                                try {
                                    let data = await res.json();
                                    if (data && data.error) msg = data.error;
                                } catch (err) { }
                                showToast(msg, 'error');
                                fetchCart();
                                return;
                            }
                            showToast('Quantity updated.', 'success');
                            fetchCart();
                        } catch (e) {
                            showToast('Error updating quantity. Please try again.', 'error');
                            fetchCart();
                        }
                    } else {
                        updateCartQuantityGuest(itemId, qty);
                    }
                }

                // Fix: handle input change event for quantity
                function onQtyInputChange(itemId, inputElem, user) {
                    let val = parseInt(inputElem.value);
                    if (isNaN(val) || val < 1) {
                        inputElem.value = 1;
                        val = 1;
                    }
                    updateCartQuantity(itemId, val, user);
                }

                function updateCartQuantityGuest(itemId, qty) {
                    let items = [];
                    try {
                        items = JSON.parse(localStorage.getItem('guestCart') || '[]');
                        if (!Array.isArray(items)) items = [];
                    } catch (err) {
                        items = [];
                    }
                    itemId = parseInt(itemId);
                    if (!isNaN(itemId) && items[itemId]) {
                        if (qty < 1) {
                            showToast('Quantity must be at least 1', 'error');
                            qty = 1;
                        }
                        items[itemId].quantity = qty;
                        localStorage.setItem('guestCart', JSON.stringify(items));
                        showToast('Quantity updated.', 'success');
                        fetchCart();
                    }
                }

                // Plus/minus buttons
                function changeQty(itemId, delta, user) {
                    const row = document.querySelector(`tr[data-item-id="${itemId}"][data-is-user="${user}"]`);
                    if (!row) return;
                    const input = row.querySelector('input.quantity');
                    let val = parseInt(input.value) || 1;
                    val = Math.max(1, val + delta);
                    input.value = val;
                    updateCartQuantity(itemId, val, user);
                }

                // Clear cart
                document.getElementById('clear-cart-btn').addEventListener('click', async function () {
                    if (user) {
                        try {
                            let res = await fetch('/clear-cart', { method: 'DELETE', credentials: 'include' });
                            if (!res.ok) throw new Error();
                            showToast('Cart cleared.', 'success');
                            fetchCart();
                        } catch (e) {
                            showToast('Error clearing cart. Please try again.', 'error');
                        }
                    } else {
                        clearCartGuest();
                    }
                });

                function clearCartGuest() {
                    localStorage.removeItem('guestCart');
                    showToast('Cart cleared.', 'success');
                    fetchCart();
                }

                // Initial load
                fetchCart();
            </script>
            <!-- End of PageContent -->
        </main>
        <!-- End of Main -->

        <!-- Start of Footer -->
        <footer class="footer appear-animate" data-animation-options="{
            'name': 'fadeIn'
        }">
            <div class="footer-newsletter bg-primary">
                <div class="container">
                    <div class="row justify-content-center align-items-center">
                        <div class="col-xl-5 col-lg-6">
                            <div class="icon-box icon-box-side text-white">
                                <div class="icon-box-icon d-inline-flex">
                                    <i class="w-icon-envelop3"></i>
                                </div>
                                <div class="icon-box-content">
                                    <h4 class="icon-box-title text-white text-uppercase font-weight-bold">Subscribe To
                                        Our Newsletter</h4>
                                    <p class="text-white">Get all the latest information on Events, Sales and Offers.
                                    </p>
                                </div>
                            </div>
                        </div>
                        <div class="col-xl-7 col-lg-6 col-md-9 mt-4 mt-lg-0 ">
                            <form action="#" method="get"
                                class="input-wrapper input-wrapper-inline input-wrapper-rounded">
                                <input type="email" class="form-control mr-2 bg-white" name="email" id="email"
                                    placeholder="Your E-mail Address" />
                                <button class="btn btn-dark btn-rounded" type="submit">Subscribe<i
                                        class="w-icon-long-arrow-right"></i></button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="footer-top">
                    <div class="row">
                        <div class="col-lg-4 col-sm-6">
                            <div class="widget widget-about mt-0 mb-4">
                                <a href="/" class="logo-footer">
                                    <img src="/images/logo.png" alt="logo-footer" width="200" height="45" />
                                </a>
                                <div class="widget-body">
                                    <p class="widget-about-title">Got Question? Call us 24/7</p>
                                    <a href="tel:+919400947122" class="widget-about-call">+91 9400947122</a>
                                     <p>Follow Us In :</p>
                                 <div class="social-icons social-icons-colored">
                                        <a    target="_blank"  href="https://www.facebook.com/profile.php?id=61577041363849#"
                                            class="social-icon social-facebook w-icon-facebook"></a>
                                        <a    target="_blank"  href="https://www.instagram.com/hofmaan.official/?fbclid=IwY2xjawLJwfRleHRuA2FlbQIxMQBicmlkETFtbmQ0UnlRc3gyNDAwaU44AR5ZqTiWzEixcnjCAnjWdJJKxyOo1SDmgvhwN8_53T5gbWCz_nWAy3l3UTZALw_aem_icwl_UgQrgnfthtQ81Mmyw"
                                            class="social-icon social-instagram w-icon-instagram"></a>
                                        <a    target="_blank"  href="https://www.youtube.com/@hofmaanofficial"
                                            class="social-icon social-youtube w-icon-youtube"></a>
                                                <a    target="_blank"  href="https://in.pinterest.com/hofmaan_official/"
                                            class="social-icon social-pinterest w-icon-pinterest"></a>
                            <a href="https://www.linkedin.com/company/107658144/admin/page-posts/published/" 
   class="social-icon" 
   target="_blank" 
   rel="noopener noreferrer">
   <i style="color: blue;" class="fab fa-linkedin-in"></i> 
</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="widget">
                                <h3 class="widget-title">Company</h3>
                                <ul class="widget-body">
                                        <li><a href="/">Home</a></li>
                                        <li><a href="/store">Store</a></li>
                                    <li><a href="/about">About Us</a></li>
                                    <li><a href="/blogs">Blogs</a></li>
                                    <li><a href="/contact">Contact Us</a></li>                              
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="widget">
                                <h4 class="widget-title">My Account</h4>
                                <ul class="widget-body">
                                    <li><a href="/orders">Track My Order</a></li>
                                    <li><a href="/cart">View Cart</a></li>
                                    <% if (user) { %>
                                        <li><a href="/account">Account</a></li>
                                        <% } else { %>
                                            <li><a href="/auth/login">Sign In</a></li>
                                            <% } %>
                                    <li><a href="/wishlist">My Wishlist</a></li>
                                </ul>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="widget">
                                <h4 class="widget-title">Customer Service</h4>
                                <ul class="widget-body">
                                    <li><a href="/terms_and_conditions">Terms and Conditions</a></li>
                                    <li><a href="/Cancellation_Refund">Cancellation Refund</a></li>
                                    <li><a href="/shipping_policy">Shipping Policy</a></li>
                                    <li><a href="/privacy_policy">Privacy Policy</a></li>
                           
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="footer-bottom">
                    <div class="footer-left">
                        <p class="copyright">
                            Copyright Â© 2025 Hofmaan. All Rights Reserved. &nbsp;|&nbsp;
                            developed by <a href="https://trivlogic.com/" target="_blank" rel="noopener" style="color:#888;text-decoration:none;">Trivlogic Pvt Ltd</a>
                        </p>
                    </div>
                    <div class="footer-right">
                        <span class="payment-label mr-lg-8">We're using safe payment for</span>
                        <figure class="payment">
                            <img src="/images/payment.png" alt="payment" width="159" height="25" />
                        </figure>
                    </div>
                </div>
            </div>
        </footer>
        <!-- End of Footer -->
    </div>
    <!-- End of Page Wrapper -->

    <!-- Start of Sticky Footer -->
   <div class="btm-main">
    <a href="#" id="mobileSearchRedirect" class="search-bar-link">
        <div class="search-bar" id="searchBar">
            <div class="search-container">
                <div class="search-input-wrapper">
                    <i class="fas fa-search search-input-icon"></i>
                    <input type="text" class="search-input" placeholder="Search products..." id="mobileSearchInput">
                </div>
                <button class="search-btn" id="mobileSearchButton">
                    <i class="fas fa-search"></i>
                </button>
            </div>
        </div>
    </a>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const input = document.getElementById('mobileSearchInput');
            const btn = document.getElementById('mobileSearchButton');
            const link = document.getElementById('mobileSearchRedirect');
            function doSearch(e) {
                e.preventDefault();
                const q = input.value.trim();
                if (q.length > 0) {
                    window.location.href = '/store?q=' + encodeURIComponent(q);
                }
            }
            btn.addEventListener('click', doSearch);
            input.addEventListener('keydown', function(e) {
                if (e.key === 'Enter') {
                    doSearch(e);
                }
            });
            link.addEventListener('click', function(e) {
                // Prevent default link if not searching
                if (input.value.trim().length === 0) e.preventDefault();
            });
        });
    </script>

        <nav class="mobile-bottom-nav">

            <div class="mob-btm-nav">
                <a href="/cart" class="sticky-link1">
                    <i class="fas fa-shopping-cart"></i>
                    <p>Cart</p>
                </a>
            </div>

            <div class="mob-btm-nav">
                <a href="/orders" class="sticky-link1">
                    <i class="fas fa-clipboard-list"></i>
                    <p>Orders</p>
                </a>
            </div>

            <div class="mob-btm-nav">
                <a href="#0" id="searchBtn" class="sticky-link1">
                    <i class="fas fa-search"></i>
                    <p>Search</p>
                </a>
            </div>

            <div class="mob-btm-nav">
                <a href="/wishlist" class="sticky-link1">
                    <i class="fas fa-heart"></i>
                    <p>Wishlist</p>
                </a>
            </div>
        </nav>
    </div>

    <div class="sticky-footer sticky-content fix-bottom">

        <a href="/" class="sticky-link"  >
            <i class="w-icon-home"></i>
            <p>Home</p>
        </a>
        <a href="/store" class="sticky-link">
            <i class="w-icon-products"></i>
            <p>Store</p>
        </a>
        <a class="btm-img" href="/"> <img src="/images/logo-2.png" alt=""></a>
        <% if (user) { %>
            <a href="/account" class="sticky-link">
                <i class="w-icon-account"></i>
                <p>Account</p>
            </a>
            <% } else { %>
                <a href="/auth/login" class="sticky-link">
                    <i class="w-icon-account"></i>
                    <p>Login</p>
                </a>
                <% } %>


                    <a href="/contact" class="sticky-link">
                        <i class="w-icon-call2"></i>
                        <p>Contact </p>
                    </a>
    </div>
    <!-- End of Sticky Footer -->

    <!-- Start of Scroll Top -->
    <a id="scroll-top" class="scroll-top" href="#top" title="Top" role="button"> <i class="w-icon-angle-up"></i> <svg
            version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 70">
            <circle id="progress-indicator" fill="transparent" stroke="#000000" stroke-miterlimit="10" cx="35" cy="35"
                r="34" style="stroke-dasharray: 16.4198, 400;"></circle>
        </svg> </a>
    <!-- End of Scroll Top -->

    <!-- Start of Mobile Menu -->
     <div class="mobile-menu-wrapper">
        <div class="mobile-menu-overlay"></div>
        <!-- End of .mobile-menu-overlay -->

        <a href="#" class="mobile-menu-close"><i class="close-icon"></i></a>
        <!-- End of .mobile-menu-close -->

        <div class="mobile-menu-container scrollable">
         <img class="side-logo" src="/images/logo.png" alt="logo">
            <!-- End of Search Form -->
            <div class="tab">
                <ul class="nav nav-tabs" role="tablist">
                    <li class="nav-item">
                        <a href="#main-menu" class="nav-link active">Main Menu</a>
                    </li>
                    <li class="nav-item">
                        <a href="#categories" class="nav-link">Categories</a>
                    </li>
                </ul>
            </div>
            <div class="tab-content">
                <div class="tab-pane active" id="main-menu">
                    <ul class="mobile-menu">
                        <li><a href="/">Home</a></li>
                        <li><a href="/store">Store</a></li>
                        <% if (user) { %>
                        <li><a href="/account">Profile</a></li>
                        <% } else { %>
                        <li><a href="/auth/login">Login</a></li>
                        <% } %>
                        <li><a href="/wishlist">Wishlist</a></li>
                        <li><a href="/cart">Cart</a></li>
                        <li><a href="/about">About Us</a></li>
                        <li><a href="/blogs">Blogs</a></li>
                        <li><a href="/contact">Contact Us</a></li>

                    </ul>
                </div>
                <div class="tab-pane" id="categories">
                    <ul class="mobile-menu">
                        <% categories.forEach(category=> { %>
                            <li>
                                <a style="gap: 10px!important; display: flex;" href="/store?category=<%= category._id %>">
                                    <img style="height: 30px; width: 30px; border-radius: 50px;"
                                        src="<%= category.imageUrl || '/images/hofmaan/sample3.jpg' %>" alt="">
                                    <%= category.name %>
                                </a>
                                <% if (category.subCategories && category.subCategories.length> 0) { %>
                                    <ul>
                                        <% category.subCategories.forEach(sub=> { %>
                                            <% if (sub.isActive) { %>
                                                <li>
                                                    <a href="/store?subcategory=<%= sub._id %>">
                                                        <%= sub.name %>
                                                    </a>
                                                </li>
                                                <% } %>
                                                    <% }); %>
                                    </ul>
                                    <% } %>
                            </li>
                            <% }); %>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End of Mobile Menu -->
       <!--whats app icon -->

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const searchInput = document.getElementById('searchInput');
            const searchForm = document.getElementById('searchForm');
            const suggestionsContainer = document.getElementById('searchSuggestions');
            const resultsContainer = document.getElementById('searchResults');
            let searchTimeout;

            // Helper to safely format price
            function formatPrice(price) {
                if (typeof price === 'number' && !isNaN(price)) {
                    return price.toLocaleString('en-IN');
                }
                if (typeof price === 'string' && price.trim() !== '' && !isNaN(Number(price))) {
                    return Number(price).toLocaleString('en-IN');
                }
                return '';
            }

            // Search input handler
            searchInput.addEventListener('input', function (e) {
                clearTimeout(searchTimeout);
                const query = e.target.value.trim();

                if (query.length < 2) {
                    suggestionsContainer.style.display = 'none';
                    return;
                }

                searchTimeout = setTimeout(() => {
                    fetchSuggestions(query);
                }, 300);
            });

            // Form submission handler
            searchForm.addEventListener('submit', function (e) {
                e.preventDefault();
                const query = searchInput.value.trim();
                if (query) {
                    performSearch(query);
                }
            });

            // Close results when clicking outside
            document.addEventListener('click', function (e) {
                if (!searchForm.contains(e.target)) {
                    suggestionsContainer.style.display = 'none';
                    resultsContainer.style.display = 'none';
                }
            });

            // Fetch search suggestions
            async function fetchSuggestions(query) {
                try {
                    const response = await fetch(`/search/suggestions?q=${encodeURIComponent(query)}`);

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const suggestions = await response.json();

                    if (!Array.isArray(suggestions)) {
                        throw new Error('Invalid suggestions format');
                    }

                    displaySuggestions(suggestions);
                } catch (error) {
                    console.error('Error fetching suggestions:', error);
                    suggestionsContainer.style.display = 'none';
                    suggestionsContainer.innerHTML = '<div class="error-message">Failed to load suggestions</div>';
                }
            }

            // Display suggestions
            function displaySuggestions(suggestions) {
                if (!suggestions || suggestions.length === 0) {
                    suggestionsContainer.innerHTML = '<div class="no-suggestions">No suggestions found</div>';
                    suggestionsContainer.style.display = 'block';
                    return;
                }

                suggestionsContainer.innerHTML = '';
                suggestions.forEach(item => {
                    const suggestionItem = document.createElement('div');
                    suggestionItem.className = 'suggestion-item';
                    suggestionItem.innerHTML = `
            ${item.images?.length ? `<img src="${item.images[0]}" alt="${item.name}" />` : ''}
            <div class="suggestion-text">
                <div class="suggestion-name">${item.name}</div>
                <div class="suggestion-price">â‚¹${formatPrice(item.basePrice)}</div>
            </div>
        `;
                    // âœ… Navigate to product page directly
                    suggestionItem.addEventListener('click', () => {
                        window.location.href = `/product/${item._id}`;
                    });
                    suggestionsContainer.appendChild(suggestionItem);
                });
                suggestionsContainer.style.display = 'block';
            }

            // Perform full search
            async function performSearch(query) {
                try {
                    const response = await fetch(`/search?q=${encodeURIComponent(query)}`);

                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }

                    const results = await response.json();

                    if (!Array.isArray(results)) {
                        throw new Error('Invalid results format');
                    }

                    displaySearchResults(query, results);
                } catch (error) {
                    console.error('Error performing search:', error);
                    displaySearchResults(query, []);
                }
            }

            // Display search results
            function displaySearchResults(query, products) {
                suggestionsContainer.style.display = 'none';

                if (!products || products.length === 0) {
                    resultsContainer.innerHTML = `
                <div class="no-results">
                    <h3>No results found for "${query}"</h3>
                    <p>Try different keywords or browse our categories</p>
                </div>
            `;
                } else {
                    resultsContainer.innerHTML = `
                <div class="search-results-header">
                    <h3>Results for "${query}" (${products.length})</h3>
                    <span class="close-results">&times;</span>
                </div>
                <div class="search-results-grid">
                    ${products.map(product => {
                        const priceStr = formatPrice(product.basePrice);
                        return `
                        <div class="search-result-item">
                            <a href="/product/${product._id}">
                                <img src="${product.images?.[0] || '/images/placeholder.jpg'}" alt="${product.name}" />
                                <div class="item-details">
                                    <h4>${product.name}</h4>
                                <div class="item-price">â‚¹${formatPrice(product.salePrice || product.basePrice)}</div>
                                    ${product.description ? `<p class="item-desc">${product.description.substring(0, 60)}...</p>` : ''}
                                </div>
                            </a>
                        </div>
                        `;
                    }).join('')}
                </div>
            `;
                }

                // Show results container
                resultsContainer.style.display = 'block';

                // Close button handler
                const closeBtn = resultsContainer.querySelector('.close-results');
                if (closeBtn) {
                    closeBtn.addEventListener('click', () => {
                        resultsContainer.style.display = 'none';
                    });
                }
            }
        });
    </script>
    <!-- Plugin JS File -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="/vendor/jquery/jquery.min.js"></script>
    <script src="/vendor/sticky/sticky.js"></script>
    <script src="/vendor/magnific-popup/jquery.magnific-popup.min.js"></script>
    <script src="/js/main.min.js"></script>
    <script src="/js/script.js"></script>
</body>



</html>